<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <title>üí£ Minesweeper Online</title>
    <script src="https://unpkg.com/htmx.org@1.9.3"></script>
    <script src="https://unpkg.com/htmx.org/dist/ext/ws.js"></script>
    <link rel="stylesheet" href="/static/css/minesweeper_general.css"/>
</head>
<body>
<div>
    –°—Ç–∞—Ç—É—Å –≤–µ–±-—Å–æ–∫–µ—Ç–∞: <span id="status"></span><br>
</div>
<div hx-ext="ws" ws-connect="/ws/connected">
    <form ws-send>
        <input name="chat_message"/>
    </form>
    <div id="content"></div>
</div>
<div id="create_game_form">
    <div style="display:flex; justify-content:center; align-items:center;">
        <div>
            –ö–æ–¥ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: {{ game_code }}
        </div>
    </div>
</div>
</body>
<script type="text/javascript" defer>
    let status = document.getElementById('status');
    status.innerText = '–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ –≤–µ–±-—Å–æ–∫–µ—Ç—É –≤—ã–∫–ª—é—á–µ–Ω–æ';
    status.setAttribute('data-status', 'none');
    // htmx:wsConnecting
    // htmx:wsError
    let socket;
    let elt;
    document.body.addEventListener('htmx:wsOpen', function (evt) {
        socket = evt.detail.socketWrapper;
        elt = evt.detail.elt;
        status.innerText = '–ü–æ–¥–∫–ª—é—á–µ–Ω–æ';
        status.setAttribute('data-status', 'connected');
    });
    document.body.addEventListener('htmx:wsClose', function (evt) {
        status.innerText = '–û—Ç–∫–ª—é—á–µ–Ω–æ';
        status.setAttribute('data-status', 'disconnected');
    });
</script>
